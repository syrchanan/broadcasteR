% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rlid_streak.R
\name{rlid_streak}
\alias{rlid_streak}
\title{Generate Run-Length IDs and Streak Counts}
\usage{
rlid_streak(vec, return = c("all", "streak", "rlid"), index_0 = F)
}
\arguments{
\item{vec}{A vector of any type that can be processed by \code{rle()}, such as
numeric, character, or logical.}

\item{return}{A character string specifying the desired output. Must be one of
\code{"all"}, \code{"streak"}, or \code{"rlid"}.
\itemize{
\item \code{"all"} (default): Returns a list containing both the \code{streak} and \code{rlid} vectors.
\item \code{"streak"}: Returns only the \code{streak} count vector.
\item \code{"rlid"}: Returns only the \code{rlid} vector.
}}

\item{index_0}{A logical value. If \code{TRUE}, the \code{rlid} vector will be zero-indexed
(starting from \code{0}) instead of one-indexed (starting from \code{1}). This
parameter only affects the \code{rlid} output. Defaults to \code{FALSE}.}
}
\value{
If \code{return = "all"}, a list with two numeric vectors: \code{streak} and \code{rlid}.
Otherwise, a single numeric vector corresponding to the requested output.
The length of the returned vector(s) will be the same as the input vector \code{vec}.
}
\description{
This function analyzes a vector to identify consecutive sequences of identical
values, generating two corresponding vectors: a run-length ID (\code{rlid}) that
identifies each unique block of values and a streak count that tracks the
position within each block.
}
\details{
The \code{rlid} is a unique identifier for each sequence of repeated values. For
example, in the vector \code{c("a", "a", "b", "c", "c")}, the \code{rlid} would be
\code{c(1, 1, 2, 3, 3)}. The \code{streak} count is a cumulative count within each
block, so for the same vector, the \code{streak} would be \code{c(1, 2, 1, 1, 2)}.
This can be particularly useful for grouping data by consecutive values or
for counting events within a sequence.
}
\examples{
# --- Standalone Vector Examples ---

# Example 1: Basic usage with a numeric vector
x <- c(1, 1, 2, 3, 3, 3, 1)
rlid_streak(x, return = "all")
# Returns a list: $streak=c(1, 2, 1, 1, 2, 3, 1), $rlid=c(1, 1, 2, 3, 3, 3, 4)

# Example 2: Return only the streak count
rlid_streak(x, return = "streak")
# Returns: 1 2 1 1 2 3 1

# Example 3: Return only the run-length ID
rlid_streak(x, return = "rlid")
# Returns: 1 1 2 3 3 3 4

# Example 4: Using index_0 = TRUE for zero-indexed rlid
rlid_streak(x, return = "all", index_0 = TRUE)
# Returns a list: $streak=c(1, 2, 1, 1, 2, 3, 1), $rlid=c(0, 0, 1, 2, 2, 2, 3)

# Example 5: Usage with a character vector
y <- c("A", "A", "B", "C", "C", "A")
rlid_streak(y, return = "rlid")
# Returns: 1 1 2 3 3 4

# --- Data Frame Examples (using dplyr) ---
\dontrun{
library(dplyr)

# Use rlid_streak to group by consecutive values in a data frame
data <- tibble::tibble(
  id = c(1, 1, 2, 3, 3, 3, 4),
  value = c(10, 20, 30, 40, 50, 60, 70)
)

# Group by consecutive 'id' values and calculate the mean of 'value' for each block
data \%>\%
  group_by(block_id = rlid_streak(id, return = "rlid")) \%>\%
  summarise(
    n = n(),
    avg_value = mean(value),
    .groups = 'drop'
  )
}
}
